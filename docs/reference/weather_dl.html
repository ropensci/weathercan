<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Download weather data from Environment Canada — weather_dl • weathercan</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/paper/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">


<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>
  <link href="../extra.css" rel="stylesheet">
  
<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">weathercan</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li>
  <a href="../articles/weathercan.html">Getting Started</a>
</li>
<li>
  <a href="http://ropensci.github.io/Presentations/#weathercan">Presentations</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="dropdown-header">Tutorials</li>
    <li>
      <a href="../articles/interpolate_data.html">Interpolating</a>
    </li>
    <li>
      <a href="../articles/articles/use_with_tidyverse.html">Using weathercan with the tidyverse</a>
    </li>
    <li class="divider"></li>
    <li class="dropdown-header">Reference vignetts</li>
    <li>
      <a href="../articles/flags.html">Data flags</a>
    </li>
    <li>
      <a href="../articles/glossary.html">Glossary of units and measurements</a>
    </li>
  </ul>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/ropensci/weathercan">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Download weather data from Environment Canada</h1>
    </div>

    
    <p>Downloads data from Environment Canada for one or more stations. For details
and units, see the glossary vignette (<code><a href='https://cran.rstudio.com/web/packages/weathercan/vignettes/glossary.html'>vignette("glossary", package =
"weathercan")</a></code>) or the glossary online
<a href='http://climate.weather.gc.ca/glossary_e.html'>http://climate.weather.gc.ca/glossary_e.html</a>.</p>
    

    <pre class="usage"><span class='fu'>weather_dl</span>(<span class='no'>station_ids</span>, <span class='kw'>start</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>end</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>interval</span> <span class='kw'>=</span> <span class='st'>"hour"</span>,
  <span class='kw'>trim</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>format</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>string_as</span> <span class='kw'>=</span> <span class='fl'>NA</span>, <span class='kw'>tz_disp</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>stn</span> <span class='kw'>=</span> <span class='kw pkg'>weathercan</span><span class='kw ns'>::</span><span class='no'><a href='http://www.rdocumentation.org/packages/weathercan/topics/stations'>stations</a></span>, <span class='kw'>url</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>encoding</span> <span class='kw'>=</span> <span class='st'>"UTF-8"</span>,
  <span class='kw'>list_col</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>verbose</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>quiet</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a> Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>station_ids</th>
      <td><p>Numeric/Character. A vector containing the ID(s) of the
station(s) you wish to download data from. See the <code><a href='stations.html'>stations</a></code>
data frame or the <code><a href='stations_search.html'>stations_search</a></code> function to find IDs.</p></td>
    </tr>
    <tr>
      <th>start</th>
      <td><p>Date/Character. The start date of the data in YYYY-MM-DD format
(applies to all stations_ids). Defaults to start of range.</p></td>
    </tr>
    <tr>
      <th>end</th>
      <td><p>Date/Character. The end date of the data in YYYY-MM-DD format
(applies to all station_ids). Defaults to end of range.</p></td>
    </tr>
    <tr>
      <th>interval</th>
      <td><p>Character. Interval of the data, one of "hour", "day",
"month".</p></td>
    </tr>
    <tr>
      <th>trim</th>
      <td><p>Logical. Trim missing values from the start and end of the
weather dataframe. Only applies if `format = TRUE`</p></td>
    </tr>
    <tr>
      <th>format</th>
      <td><p>Logical. If TRUE, formats data for immediate use. If FALSE,
returns data exactly as downloaded from Environment and Climate Change
Canada. Useful for dealing with changes by Environment Canada to the format
of data downloads.</p></td>
    </tr>
    <tr>
      <th>string_as</th>
      <td><p>Character. What value to replace character strings in a
numeric measurement with. See Details.</p></td>
    </tr>
    <tr>
      <th>tz_disp</th>
      <td><p>Character. What timezone to display times in (must be one of
<code>OlsonNames()</code>).</p></td>
    </tr>
    <tr>
      <th>stn</th>
      <td><p>Data frame. The <code>stations</code> data frame to use. Will use the
one included in the package unless otherwise specified.</p></td>
    </tr>
    <tr>
      <th>url</th>
      <td><p>Character. Url from which to grab the weather data. If NULL uses
default url (see details)</p></td>
    </tr>
    <tr>
      <th>encoding</th>
      <td><p>Character. Text encoding for download.</p></td>
    </tr>
    <tr>
      <th>list_col</th>
      <td><p>Logical. Return data as nested data set? Defaults to FALSE.
Only applies if `format = TRUE`</p></td>
    </tr>
    <tr>
      <th>verbose</th>
      <td><p>Logical. Include progress messages</p></td>
    </tr>
    <tr>
      <th>quiet</th>
      <td><p>Logical. Suppress all messages (including messages regarding
missing data, etc.)</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A tibble with station ID, name and weather data.</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Data can be returned 'raw' (format = FALSE) or can be formatted.
  Formatting transforms dates/times to date/time class, renames columns, and
  converts data to numeric where possible. If character strings are contained
  in traditionally numeric fields (e.g., weather speed may have values such
  as "&lt; 30"), they can be replaced with a character specified by `string_as`.
  The default is NA. Formating also replaces data associated with certain
  flags with NA (M = Missing).</p>
<p>Start and end date can be specified, but if not, it will default to the
  start and end date of the range (this could result in downloading a lot of
  data!).</p>
<p>Times are returned as the Etc/GMT offset timezone corresponding to the
  location. This does not include daylight savings. However, for
  compatibility with other data sets, timezones can be converted by
  specifying the desired timezone in `tz_disp`.</p>
<p>By default, downloads from
  "http://climate.weather.gc.ca/climate_data/bulk_data_e.html"</p>
<p>Data is downloaded from ECCC as a series of files which are then bound
  together. Each file corresponds to a different month, or year, depending on
  the interval. Metadata (station name, lat, lon, elevation, etc.) is
  extracted from the start of the most recent file (i.e. most recent dates)
  for a given station. Note that important data (i.e. station name, lat, lon)
  is unlikely to change between files (i.e. dates), but some data may or may
  not be available depending on the date of the file (e.g., station operator
  was added as of April 1st 2018, so will be in all data which includes dates
  on or after April 2018).</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>
</div><span class='co'># NOT RUN {</span>
<span class='no'>kam</span> <span class='kw'>&lt;-</span> <span class='fu'>weather_dl</span>(<span class='kw'>station_ids</span> <span class='kw'>=</span> <span class='fl'>51423</span>,
                  <span class='kw'>start</span> <span class='kw'>=</span> <span class='st'>"2016-01-01"</span>, <span class='kw'>end</span> <span class='kw'>=</span> <span class='st'>"2016-02-15"</span>)
<span class='co'># }</span><div class='input'>
<span class='fu'><a href='stations_search.html'>stations_search</a></span>(<span class='st'>"Kamloops A$"</span>, <span class='kw'>interval</span> <span class='kw'>=</span> <span class='st'>"hour"</span>)</div><div class='output co'>#&gt; # A tibble: 2 x 12
#&gt;   prov  station_name station_id climate_id WMO_id TC_id   lat   lon  elev
#&gt;   &lt;fct&gt; &lt;chr&gt;        &lt;fct&gt;      &lt;fct&gt;      &lt;fct&gt;  &lt;fct&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
#&gt; 1 BC    KAMLOOPS A   1275       1163780    71887  YKA    50.7  -120   345
#&gt; 2 BC    KAMLOOPS A   51423      1163781    71887  YKA    50.7  -120   345
#&gt; # ... with 3 more variables: interval &lt;chr&gt;, start &lt;int&gt;, end &lt;int&gt;</div><div class='input'><span class='fu'><a href='stations_search.html'>stations_search</a></span>(<span class='st'>"Prince George Airport"</span>, <span class='kw'>interval</span> <span class='kw'>=</span> <span class='st'>"hour"</span>)</div><div class='output co'>#&gt; # A tibble: 1 x 12
#&gt;   prov  station_name       station_id climate_id WMO_id TC_id   lat   lon  elev
#&gt;   &lt;fct&gt; &lt;chr&gt;              &lt;fct&gt;      &lt;fct&gt;      &lt;fct&gt;  &lt;fct&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
#&gt; 1 BC    PRINCE GEORGE AIR… 48248      1096453    71302  VXS    53.9  -123   680
#&gt; # ... with 3 more variables: interval &lt;chr&gt;, start &lt;int&gt;, end &lt;int&gt;</div><span class='co'># NOT RUN {</span>
<span class='no'>kam.pg</span> <span class='kw'>&lt;-</span> <span class='fu'>weather_dl</span>(<span class='kw'>station_ids</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='fl'>48248</span>, <span class='fl'>51423</span>),
                     <span class='kw'>start</span> <span class='kw'>=</span> <span class='st'>"2016-01-01"</span>, <span class='kw'>end</span> <span class='kw'>=</span> <span class='st'>"2016-02-15"</span>)

<span class='fu'>library</span>(<span class='no'>ggplot2</span>)

<span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/ggplot'>ggplot</a></span>(<span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>kam.pg</span>, <span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/aes'>aes</a></span>(<span class='kw'>x</span> <span class='kw'>=</span> <span class='no'>time</span>, <span class='kw'>y</span> <span class='kw'>=</span> <span class='no'>temp</span>,
                          <span class='kw'>group</span> <span class='kw'>=</span> <span class='no'>station_name</span>,
                          <span class='kw'>colour</span> <span class='kw'>=</span> <span class='no'>station_name</span>)) +
       <span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/geom_path'>geom_line</a></span>()
<span class='co'># }</span><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Steffi LaZerte.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>
