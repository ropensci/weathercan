<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Using with the tidyverse • weathercan</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/paper/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- pkgdown --><link href="../../pkgdown.css" rel="stylesheet">
<script src="../../jquery.sticky-kit.min.js"></script><script src="../../pkgdown.js"></script><link href="../../extra.css" rel="stylesheet">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../../index.html">weathercan</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../../index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li>
  <a href="../../articles/weathercan.html">Getting Started</a>
</li>
<li>
  <a href="http://ropensci.github.io/Presentations/#weathercan">Presentations</a>
</li>
<li>
  <a href="../../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li class="dropdown-header">Tutorials</li>
    <li>
      <a href="../../articles/interpolate_data.html">Interpolating</a>
    </li>
    <li>
      <a href="../../articles/articles/use_with_tidyverse.html">Using weathercan with the tidyverse</a>
    </li>
    <li class="divider">
    <li class="dropdown-header">Reference vignetts</li>
    <li>
      <a href="../../articles/flags.html">Data flags</a>
    </li>
    <li>
      <a href="../../articles/glossary.html">Glossary of units and measurements</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/ropensci/weathercan">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    <div class="page-header toc-ignore">
      <h1>Using with the tidyverse</h1>
                        <h4 class="author">Sam Albers</h4>
            
            <h4 class="date">2018-02-01</h4>
          </div>

    
    
<div class="contents">
<div id="source-material" class="section level2">
<h2 class="hasAnchor">
<a href="#source-material" class="anchor"></a>Source material</h2>
<p>This vignette is adapted very heavily from Hadley Wickham’s incredible <a href="http://r4ds.had.co.nz/"><em>R for Data Science</em></a> book. You should support Hadley and the work he does by buying <a href="https://www.amazon.com/Data-Science-Transform-Visualize-Model/dp/1491910399">it</a>.</p>
</div>
<div id="packages" class="section level2">
<h2 class="hasAnchor">
<a href="#packages" class="anchor"></a>Packages</h2>
<p>In addition to <em>weathercan</em>, you’ll need several packages from the <em>tidyverse</em> to complete the following analysis.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(weathercan)
<span class="kw">library</span>(tibble)
<span class="kw">library</span>(dplyr)
<span class="kw">library</span>(tidyr)
<span class="kw">library</span>(ggplot2)
<span class="kw">library</span>(broom)
<span class="kw">library</span>(modelr)
<span class="kw">library</span>(purrr)</code></pre></div>
</div>
<div id="using-weathercan-to-load-in-data" class="section level2">
<h2 class="hasAnchor">
<a href="#using-weathercan-to-load-in-data" class="anchor"></a>Using weathercan to load in data</h2>
<p>Your first decision that you need to make when analyzing data from weather stations across canada is to determine for which stations you’d like to query from Environment and Climate Change Canada. In this example, to keep processing time low, we will query two stations with very long records that happen to be far apart. To make that choice we can use (tidyverse)[<a href="http://tidyverse.org/" class="uri">http://tidyverse.org/</a>] tools and the included <code>stations</code> data frame in this package:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">stations %&gt;%
<span class="st">  </span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(station_id %in%<span class="st"> </span><span class="kw">c</span>(<span class="dv">707</span>, <span class="dv">4859</span>, <span class="dv">6693</span>,<span class="dv">5397</span>, <span class="dv">2315</span>),
         interval ==<span class="st"> "day"</span>) %&gt;%
<span class="st">  </span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/select.html">select</a></span>(prov, station_name, station_id, start, end)</code></pre></div>
<pre><code>## # A tibble: 5 x 5
##   prov   station_name     station_id start   end
##   &lt;fctr&gt; &lt;chr&gt;            &lt;fctr&gt;     &lt;int&gt; &lt;int&gt;
## 1 BC     AGASSIZ CDA      707         1889  2017
## 2 AB     TABER            2315        1907  2018
## 3 ON     BELLEVILLE       4859        1866  2018
## 4 QC     LENNOXVILLE      5397        1888  2018
## 5 NL     PORT AUX BASQUES 6693        1909  2017</code></pre>
<p>These two weather stations will be our test data for this vignette. You can broaden or expand your analysis by choosing different or more station. Our next step is to use the <code><a href="../../reference/weather_dl.html">weather_dl()</a></code> function to load in the data.</p>
<p>The following will take quite some time to download as it is downloading over 100 years of daily data for 5 stations.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">pancan_df &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/weather_dl.html">weather_dl</a></span>(<span class="dt">station_ids =</span> <span class="kw">c</span>(<span class="dv">707</span>, <span class="dv">4859</span>, <span class="dv">6693</span>,<span class="dv">5397</span>, <span class="dv">2315</span>), 
                        <span class="dt">interval =</span> <span class="st">"day"</span>) %&gt;%
<span class="st">  </span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(year &gt;=<span class="st"> </span><span class="dv">1920</span>) %&gt;%
<span class="st">  </span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/select.html">select</a></span>(station_name, station_id, prov, lat, lon, elev, climate_id, WMO_id, TC_id, mean_temp, date)</code></pre></div>
</div>
<div id="plot-the-data" class="section level2">
<h2 class="hasAnchor">
<a href="#plot-the-data" class="anchor"></a>Plot the data</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/ggplot">ggplot</a></span>(pancan_df, <span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/aes">aes</a></span>(<span class="dt">x =</span> date, <span class="dt">y =</span> mean_temp, <span class="dt">colour =</span> station_name)) +
<span class="st">  </span><span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/geom_point">geom_point</a></span>() +
<span class="st">  </span><span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/geom_path">geom_line</a></span>()</code></pre></div>
<pre><code>## Warning: Removed 25425 rows containing missing values (geom_point).</code></pre>
<pre><code>## Warning: Removed 6509 rows containing missing values (geom_path).</code></pre>
<p><img src="use_with_tidyverse_files/figure-html/raw_plt-1.png" width="960"></p>
<p>This is quite a large dataset.</p>
</div>
<div id="creating-list-columns" class="section level2">
<h2 class="hasAnchor">
<a href="#creating-list-columns" class="anchor"></a>Creating list-columns</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">pancan_df_nest &lt;-<span class="st"> </span>pancan_df %&gt;%
<span class="st">  </span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span>(station_name, station_id, prov, lat, lon, elev, climate_id, WMO_id, TC_id) %&gt;%
<span class="st">  </span><span class="kw"><a href="http://www.rdocumentation.org/packages/tidyr/topics/nest">nest</a></span>()
pancan_df_nest</code></pre></div>
<pre><code>## # A tibble: 5 x 10
##   station_name     stati… prov    lat    lon  elev clim… WMO_… TC_id data 
##   &lt;chr&gt;             &lt;dbl&gt; &lt;fct&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;lis&gt;
## 1 AGASSIZ CDA         707 BC     49.2 -122    15.0 1100… ""    ""    &lt;tib…
## 2 BELLEVILLE         4859 ON     44.2 - 77.4  76.2 6150… ""    ""    &lt;tib…
## 3 PORT AUX BASQUES   6693 NL     47.6 - 59.2  39.7 8402… 71197 WZB   &lt;tib…
## 4 LENNOXVILLE        5397 QC     45.4 - 71.8 181   7024… 71611 WQH   &lt;tib…
## 5 TABER              2315 AB     49.8 -112   811   3036… ""    ""    &lt;tib…</code></pre>
</div>
<div id="fit-some-models" class="section level2">
<h2 class="hasAnchor">
<a href="#fit-some-models" class="anchor"></a>Fit some models</h2>
<p>Define the model</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">clim_model &lt;-<span class="st"> </span>function(df) {
  <span class="kw">lm</span>(mean_temp ~<span class="st"> </span>date, <span class="dt">data =</span> df)
}</code></pre></div>
<p>Run the model with the existing data</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">pancan_df_nest &lt;-<span class="st"> </span>pancan_df_nest %&gt;%<span class="st"> </span>
<span class="st">  </span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="dt">model =</span> <span class="kw"><a href="http://www.rdocumentation.org/packages/purrr/topics/map">map</a></span>(data, clim_model))
pancan_df_nest</code></pre></div>
<pre><code>## # A tibble: 5 x 11
##   statio… stati… prov     lat    lon  elev clim… WMO_… TC_id data    model
##   &lt;chr&gt;    &lt;dbl&gt; &lt;fctr&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;list&gt;  &lt;lis&gt;
## 1 AGASSI…    707 BC      49.2 -122    15.0 1100… ""    ""    &lt;tibbl… &lt;S3:…
## 2 BELLEV…   4859 ON      44.2 - 77.4  76.2 6150… ""    ""    &lt;tibbl… &lt;S3:…
## 3 PORT A…   6693 NL      47.6 - 59.2  39.7 8402… 71197 WZB   &lt;tibbl… &lt;S3:…
## 4 LENNOX…   5397 QC      45.4 - 71.8 181   7024… 71611 WQH   &lt;tibbl… &lt;S3:…
## 5 TABER     2315 AB      49.8 -112   811   3036… ""    ""    &lt;tibbl… &lt;S3:…</code></pre>
<p>Then add the residuals to the model</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">pancan_df_nest &lt;-<span class="st"> </span>pancan_df_nest %&gt;%<span class="st"> </span>
<span class="st">  </span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="dt">model =</span> <span class="kw"><a href="http://www.rdocumentation.org/packages/purrr/topics/map">map</a></span>(data, clim_model),
         <span class="dt">resids =</span> <span class="kw"><a href="http://www.rdocumentation.org/packages/purrr/topics/map2">map2</a></span>(data, model, add_residuals)) 
pancan_df_nest</code></pre></div>
<pre><code>## # A tibble: 5 x 12
##   stat… stat… prov    lat    lon  elev clim… WMO_… TC_id data  model resi…
##   &lt;chr&gt; &lt;dbl&gt; &lt;fct&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;lis&gt; &lt;lis&gt; &lt;lis&gt;
## 1 AGAS…   707 BC     49.2 -122    15.0 1100… ""    ""    &lt;tib… &lt;S3:… &lt;tib…
## 2 BELL…  4859 ON     44.2 - 77.4  76.2 6150… ""    ""    &lt;tib… &lt;S3:… &lt;tib…
## 3 PORT…  6693 NL     47.6 - 59.2  39.7 8402… 71197 WZB   &lt;tib… &lt;S3:… &lt;tib…
## 4 LENN…  5397 QC     45.4 - 71.8 181   7024… 71611 WQH   &lt;tib… &lt;S3:… &lt;tib…
## 5 TABER  2315 AB     49.8 -112   811   3036… ""    ""    &lt;tib… &lt;S3:… &lt;tib…</code></pre>
</div>
<div id="working-with-list-columns" class="section level2">
<h2 class="hasAnchor">
<a href="#working-with-list-columns" class="anchor"></a>Working with list-columns</h2>
<p>We can unnest the results then plot them</p>
<div id="unnest" class="section level3">
<h3 class="hasAnchor">
<a href="#unnest" class="anchor"></a><code><a href="http://www.rdocumentation.org/packages/tidyr/topics/unnest">unnest()</a></code>
</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">resids &lt;-<span class="st"> </span><span class="kw"><a href="http://www.rdocumentation.org/packages/tidyr/topics/unnest">unnest</a></span>(pancan_df_nest, resids)
resids</code></pre></div>
<pre><code>## # A tibble: 179,130 x 12
##    stat… stat… prov    lat   lon  elev clim… WMO_… TC_id mean_… date      
##    &lt;chr&gt; &lt;dbl&gt; &lt;fct&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;  &lt;dbl&gt; &lt;date&gt;    
##  1 AGAS…   707 BC     49.2  -122  15.0 1100… ""    ""     3.40  1920-01-01
##  2 AGAS…   707 BC     49.2  -122  15.0 1100… ""    ""     4.20  1920-01-02
##  3 AGAS…   707 BC     49.2  -122  15.0 1100… ""    ""     3.10  1920-01-03
##  4 AGAS…   707 BC     49.2  -122  15.0 1100… ""    ""     1.40  1920-01-04
##  5 AGAS…   707 BC     49.2  -122  15.0 1100… ""    ""     1.40  1920-01-05
##  6 AGAS…   707 BC     49.2  -122  15.0 1100… ""    ""     1.40  1920-01-06
##  7 AGAS…   707 BC     49.2  -122  15.0 1100… ""    ""    -0.300 1920-01-07
##  8 AGAS…   707 BC     49.2  -122  15.0 1100… ""    ""    -0.600 1920-01-08
##  9 AGAS…   707 BC     49.2  -122  15.0 1100… ""    ""     0.900 1920-01-09
## 10 AGAS…   707 BC     49.2  -122  15.0 1100… ""    ""     1.40  1920-01-10
## # ... with 179,120 more rows, and 1 more variable: resid &lt;dbl&gt;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/ggplot">ggplot</a></span>(<span class="dt">data =</span> resids, <span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/aes">aes</a></span>(date, resid)) +
<span class="st">  </span><span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/geom_path">geom_line</a></span>(<span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/aes">aes</a></span>(<span class="dt">group =</span> station_name), <span class="dt">alpha =</span> <span class="dv">1</span> /<span class="st"> </span><span class="dv">3</span>) +<span class="st"> </span>
<span class="st">  </span><span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/geom_point">geom_point</a></span>() +
<span class="st">  </span><span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/geom_abline">geom_hline</a></span>(<span class="dt">yintercept =</span> <span class="dv">0</span>) +
<span class="st">  </span><span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/facet_wrap">facet_wrap</a></span>(~<span class="st"> </span>station_name, <span class="dt">ncol =</span> <span class="dv">1</span>)</code></pre></div>
<pre><code>## Warning: Removed 6509 rows containing missing values (geom_path).</code></pre>
<pre><code>## Warning: Removed 25425 rows containing missing values (geom_point).</code></pre>
<p><img src="use_with_tidyverse_files/figure-html/resid-1.png" width="960"></p>
</div>
<div id="using-broom" class="section level3">
<h3 class="hasAnchor">
<a href="#using-broom" class="anchor"></a>Using broom</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">glance_df &lt;-<span class="st"> </span>pancan_df_nest %&gt;%<span class="st"> </span>
<span class="st">  </span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="dt">glance =</span> <span class="kw"><a href="http://www.rdocumentation.org/packages/purrr/topics/map">map</a></span>(model, broom::glance)) %&gt;%<span class="st"> </span>
<span class="st">  </span><span class="kw"><a href="http://www.rdocumentation.org/packages/tidyr/topics/unnest">unnest</a></span>(glance, <span class="dt">.drop =</span> <span class="ot">TRUE</span>) %&gt;%
<span class="st">  </span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/select.html">select</a></span>(station_name, prov, r.squared, p.value, AIC)</code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">station_name</th>
<th align="left">prov</th>
<th align="right">r.squared</th>
<th align="right">p.value</th>
<th align="right">AIC</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">AGASSIZ CDA</td>
<td align="left">BC</td>
<td align="right">0.0026398</td>
<td align="right">0.0000000</td>
<td align="right">232607.0</td>
</tr>
<tr class="even">
<td align="left">BELLEVILLE</td>
<td align="left">ON</td>
<td align="right">0.0024359</td>
<td align="right">0.0000000</td>
<td align="right">261292.2</td>
</tr>
<tr class="odd">
<td align="left">PORT AUX BASQUES</td>
<td align="left">NL</td>
<td align="right">0.0041296</td>
<td align="right">0.0000000</td>
<td align="right">178541.2</td>
</tr>
<tr class="even">
<td align="left">LENNOXVILLE</td>
<td align="left">QC</td>
<td align="right">0.0010621</td>
<td align="right">0.0000000</td>
<td align="right">274604.0</td>
</tr>
<tr class="odd">
<td align="left">TABER</td>
<td align="left">AB</td>
<td align="right">0.0004144</td>
<td align="right">0.0019517</td>
<td align="right">179016.0</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="looking-at-the-predictions" class="section level2">
<h2 class="hasAnchor">
<a href="#looking-at-the-predictions" class="anchor"></a>Looking at the predictions</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">preds &lt;-<span class="st"> </span>pancan_df_nest %&gt;%<span class="st"> </span>
<span class="st">  </span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="dt">model =</span> <span class="kw"><a href="http://www.rdocumentation.org/packages/purrr/topics/map">map</a></span>(data, clim_model),
         <span class="dt">preds =</span> <span class="kw"><a href="http://www.rdocumentation.org/packages/purrr/topics/map2">map2</a></span>(data, model, add_predictions)) %&gt;%
<span class="st">  </span><span class="kw"><a href="http://www.rdocumentation.org/packages/tidyr/topics/unnest">unnest</a></span>(preds)
preds</code></pre></div>
<pre><code>## # A tibble: 179,130 x 12
##    stat… stat… prov    lat   lon  elev clim… WMO_… TC_id mean_… date      
##    &lt;chr&gt; &lt;dbl&gt; &lt;fct&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;  &lt;dbl&gt; &lt;date&gt;    
##  1 AGAS…   707 BC     49.2  -122  15.0 1100… ""    ""     3.40  1920-01-01
##  2 AGAS…   707 BC     49.2  -122  15.0 1100… ""    ""     4.20  1920-01-02
##  3 AGAS…   707 BC     49.2  -122  15.0 1100… ""    ""     3.10  1920-01-03
##  4 AGAS…   707 BC     49.2  -122  15.0 1100… ""    ""     1.40  1920-01-04
##  5 AGAS…   707 BC     49.2  -122  15.0 1100… ""    ""     1.40  1920-01-05
##  6 AGAS…   707 BC     49.2  -122  15.0 1100… ""    ""     1.40  1920-01-06
##  7 AGAS…   707 BC     49.2  -122  15.0 1100… ""    ""    -0.300 1920-01-07
##  8 AGAS…   707 BC     49.2  -122  15.0 1100… ""    ""    -0.600 1920-01-08
##  9 AGAS…   707 BC     49.2  -122  15.0 1100… ""    ""     0.900 1920-01-09
## 10 AGAS…   707 BC     49.2  -122  15.0 1100… ""    ""     1.40  1920-01-10
## # ... with 179,120 more rows, and 1 more variable: pred &lt;dbl&gt;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/ggplot">ggplot</a></span>(<span class="dt">data =</span> preds, <span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/aes">aes</a></span>(<span class="dt">x =</span> date, <span class="dt">y =</span> mean_temp, <span class="dt">colour =</span> station_name)) +
<span class="st">  </span><span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/geom_point">geom_point</a></span>() +
<span class="st">  </span><span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/geom_path">geom_line</a></span>(<span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/aes">aes</a></span>(<span class="dt">y =</span> pred)) +
<span class="st">  </span><span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/facet_wrap">facet_wrap</a></span>(~<span class="st"> </span>station_name, <span class="dt">scales =</span> <span class="st">"free_y"</span>, <span class="dt">ncol =</span> <span class="dv">1</span>)</code></pre></div>
<pre><code>## Warning: Removed 25425 rows containing missing values (geom_point).</code></pre>
<p><img src="use_with_tidyverse_files/figure-html/pred-1.png" width="960"></p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#source-material">Source material</a></li>
      <li><a href="#packages">Packages</a></li>
      <li><a href="#using-weathercan-to-load-in-data">Using weathercan to load in data</a></li>
      <li><a href="#plot-the-data">Plot the data</a></li>
      <li><a href="#creating-list-columns">Creating list-columns</a></li>
      <li><a href="#fit-some-models">Fit some models</a></li>
      <li><a href="#working-with-list-columns">Working with list-columns</a></li>
      <li><a href="#looking-at-the-predictions">Looking at the predictions</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Steffi LaZerte.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
